<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>æˆ‘æ‰€ç†è§£çš„ PHP Trait | overtrue</title>
<link rel="shortcut icon" href="https://overtrue.me/favicon.ico?v=1611266970256">
<link href="https://cdn.remixicon.com/releases/v2.1.0/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://overtrue.me/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="æˆ‘æ‰€ç†è§£çš„ PHP Trait | overtrue - Atom Feed" href="https://overtrue.me/atom.xml">


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-55452630-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-55452630-1');
</script>


    <meta name="description" content="Trait æ˜¯ä» PHP 5.4 åŠ å…¥çš„ä¸€ç§ç»†ç²’åº¦ä»£ç å¤ç”¨çš„è¯­æ³•ã€‚ä»¥ä¸‹æ˜¯å®˜æ–¹æ‰‹å†Œå¯¹ Trait çš„æè¿°ï¼š

Trait æ˜¯ä¸ºç±»ä¼¼ PHP çš„å•ç»§æ‰¿è¯­è¨€è€Œå‡†å¤‡çš„ä¸€ç§ä»£ç å¤ç”¨æœºåˆ¶ã€‚Trait ä¸ºäº†å‡å°‘å•ç»§æ‰¿è¯­è¨€çš„é™åˆ¶ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿè‡ªç”±åœ°åœ¨ä¸åŒ..." />
    <meta name="keywords" content="" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://overtrue.me">
  <img class="avatar" src="https://overtrue.me/images/avatar.png?v=1611266970256" alt="">
  </a>
  <h1 class="site-title">
    overtrue
  </h1>
  <p class="site-description">
    ğŸ‡¨ğŸ‡³ <b>China Shenzhen</b>ãƒ»ğŸ•¹<b>Web developer</b>
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="https://github.com/overtrue" class="menu" target="_blank">
          å¼€æº
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/overtrue" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
        <a href="https://twitter.com/overtrue666" target="_blank">
          <i class="ri-twitter-line"></i>
        </a>
      
    
      
        <a href="https://weibo.com/44294631" target="_blank">
          <i class="ri-weibo-line"></i>
        </a>
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              æˆ‘æ‰€ç†è§£çš„ PHP Trait
            </h2>
            <div class="post-info">
              <span>
                2016-04-16
              </span>
              <span>
                5 min read
              </span>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <p><a href="http://php.net/manual/zh/language.oop5.traits.php">Trait</a> æ˜¯ä» PHP 5.4 åŠ å…¥çš„ä¸€ç§ç»†ç²’åº¦ä»£ç å¤ç”¨çš„è¯­æ³•ã€‚ä»¥ä¸‹æ˜¯å®˜æ–¹æ‰‹å†Œå¯¹ Trait çš„æè¿°ï¼š</p>
<blockquote>
<p>Trait æ˜¯ä¸ºç±»ä¼¼ PHP çš„å•ç»§æ‰¿è¯­è¨€è€Œå‡†å¤‡çš„ä¸€ç§ä»£ç å¤ç”¨æœºåˆ¶ã€‚Trait ä¸ºäº†å‡å°‘å•ç»§æ‰¿è¯­è¨€çš„é™åˆ¶ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿè‡ªç”±åœ°åœ¨ä¸åŒå±‚æ¬¡ç»“æ„å†…ç‹¬ç«‹çš„ç±»ä¸­å¤ç”¨ methodã€‚Trait å’Œ Class ç»„åˆçš„è¯­ä¹‰å®šä¹‰äº†ä¸€ç§å‡å°‘å¤æ‚æ€§çš„æ–¹å¼ï¼Œé¿å…ä¼ ç»Ÿå¤šç»§æ‰¿å’Œ Mixin ç±»ç›¸å…³å…¸å‹é—®é¢˜ã€‚</p>
<p>Trait å’Œ Class ç›¸ä¼¼ï¼Œä½†ä»…ä»…æ—¨åœ¨ç”¨ç»†ç²’åº¦å’Œä¸€è‡´çš„æ–¹å¼æ¥ç»„åˆåŠŸèƒ½ã€‚ æ— æ³•é€šè¿‡ trait è‡ªèº«æ¥å®ä¾‹åŒ–ã€‚å®ƒä¸ºä¼ ç»Ÿç»§æ‰¿å¢åŠ äº†æ°´å¹³ç‰¹æ€§çš„ç»„åˆï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œåº”ç”¨çš„å‡ ä¸ª Class ä¹‹é—´ä¸éœ€è¦ç»§æ‰¿ã€‚</p>
</blockquote>
<h2 id="ä»€ä¹ˆæ˜¯-trait">ä»€ä¹ˆæ˜¯ Trait ?</h2>
<p>å…¶å®è¯´é€šä¿—ä¸€ç‚¹ï¼Œå°±æ˜¯èƒ½æŠŠé‡å¤çš„<strong>æ–¹æ³•</strong>æ‹†åˆ†åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œé€šè¿‡ <code>use</code>  å¼•å…¥ä»¥è¾¾åˆ°ä»£ç å¤ç”¨çš„ç›®çš„ã€‚</p>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆæ ·å»æ‹†åˆ†æˆ‘ä»¬çš„ä»£ç æ‰æ˜¯åˆé€‚çš„å‘¢ï¼Ÿæˆ‘çš„çœ‹æ³•æ˜¯è¿™æ ·çš„ï¼š</p>
<p>Traitï¼Œè¯‘ä½œ <strong>â€œç‰¹æ€§â€ã€â€œç‰¹å¾â€ã€â€œç‰¹ç‚¹â€</strong> ã€‚é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼šä»€ä¹ˆæ‰æ˜¯ç‰¹æ€§ï¼Ÿ</p>
<p>ä¸€ä¸ªé”€å”®å…¬å¸æœ‰å¾ˆå¤šç§äº§å“ï¼šç”µè§†ï¼Œç”µè„‘ä¸é¼ æ ‡å«ï¼Œå¡é€šæ‰‹åŠç­‰ã€‚å…¶ä¸­é¼ æ ‡å«ä¸å¡é€šæ‰‹åŠæ˜¯éå–å“ï¼Œåªç”¨äºèµ é€ã€‚</p>
<p>é‚£ä¹ˆè¿™é‡Œçš„ â€œå¯å–æ€§â€ å°±æ˜¯ä¸€ä¸ªç‰¹æ€§ï¼Œéå–å“æ˜¯æ²¡æœ‰ä»·æ ¼çš„ã€‚æˆ‘ä»¬ä¾¿å¯ä»¥æŠ½è±¡å‡º â€œå¯å–æ€§â€  è¿™ä¸ª Trait æ¥ï¼š</p>
<pre><code class="language-php?start_inline=1">trait Sellable
{
    protected $price = 0;

    public function getPrice()
    {
        return $this-&gt;price;
    }

    public function setPrice(int $price)
    {
        $this-&gt;price = $price;
    }
}
</code></pre>
<p>å½“ç„¶æˆ‘ä»¬æ‰€æœ‰çš„äº§å“éƒ½ä¼šæœ‰å“ç‰Œä¸å…¶å®ƒåŸºæœ¬å±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¼šå®šä¹‰ä¸€ä¸ªäº§å“ç±»ï¼š</p>
<pre><code class="language-php?start_inline=1">class Pruduct
{
    protected $brand;
    //...

    public function __construct($brand)
    {
        $this-&gt;brand = $brand;
    }

    public function getBrand()
    {
        return $this-&gt;brand;
    }

    //...
}
</code></pre>
<p>æˆ‘ä»¬çš„ç”µè§†ä¸ç”µè„‘ç±»ï¼š</p>
<pre><code class="language-php?start_inline=1">class TV extends Pruduct
{
    use Sellable;
    //...

    public function play()
    {
        echo &quot;ä¸€å° {$this-&gt;brand} ç”µè§†åœ¨æ’­æ”¾ä¸­...&quot;;
    }

    //...
}

class Computer extends Pruduct
{
    use Sellable;

    protected $cores = 8;
    //...

    public function getNumberOfCores()
    {
        return $this-&gt;cores;
    }

    //...
}
</code></pre>
<p>è€Œé¼ æ ‡å«ä¸æ‰‹åŠç­‰ç¤¼å“æ˜¯ä¸å¯å–çš„ï¼š</p>
<pre><code class="language-php?start_inline=1">class Gift extends Pruduct
{
    protected $name;

    function __construct($brand, $name)
    {
        parent::__construct($brand);
        $this-&gt;name = $name;
    }

    //...
}
</code></pre>
<p>ä¸Šé¢çš„è¿™ä¸ªä¾‹å­ä¸­ï¼Œâ€œå¯å–æ€§â€ ä¾¿æ˜¯éƒ¨åˆ†å•†å“çš„ä¸€ä¸ªç‰¹æ€§ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºå•†å“çš„ä¸€ä¸ªå½’ç±»ã€‚ä½ ä¹Ÿè®¸ä¼šè¯´ï¼Œæˆ‘ä¹Ÿå¯ä»¥å†æ·»åŠ ä¸€ä¸ª Goods ç±»æ¥å®Œæˆä¸Šé¢çš„ä¾‹å­å•Šï¼ŒGoods ç»§æ‰¿ Productï¼Œå†è®©æ‰€æœ‰å¯å–çš„å•†å“ç»§æ‰¿äº Goods ç±»ï¼ŒæŠŠä»·æ ¼å±æ€§ä¸æ–¹æ³•å†™åˆ° Goods é‡Œï¼ŒåŒæ ·å¯ä»¥ä»£ç å¤ç”¨å•Šã€‚çš„ç¡®ï¼Œè¿™æ²¡å•¥é—®é¢˜ã€‚ä½†æ˜¯ä½ ä¼šå‘ç°ï¼šä½ æœ‰å¤šä¸ªéœ€è¦åŒºåˆ«çš„ç‰¹æ€§æ—¶ï¼Œç”±äº PHP åªæœ‰å•ç»§æ‰¿çš„åŸå› ï¼Œä½ ä¸å¾—ä¸ç»„åˆå¾ˆå¤šä¸ªåŸºç±»å‡ºæ¥ï¼Œå°†ä»–ä»¬å±‚å ï¼Œæœ€ç»ˆå¾—åˆ°çš„æ ‘çŠ¶ç»“æ„æ˜¯å¾ˆå¤æ‚çš„ã€‚è¿™ä¹Ÿæ˜¯ Trait æ‰€å¸¦æ¥çš„ä¼˜åŠ¿ï¼šéšæ„ç»„åˆï¼Œä»£ç æ¸…æ™°ã€‚</p>
<p>å…¶å®è¿˜æœ‰å¾ˆå¤šä¾‹å­ï¼Œæ¯”å¦‚<strong>å¯é£è¡Œçš„</strong>ï¼Œé‚£ä¹ˆæŠŠé£è¡Œè¿™ä¸ªç‰¹æ€§æ‰€å…·æœ‰çš„å±æ€§ï¼ˆå¦‚ï¼šé«˜åº¦ï¼Œè·ç¦»ï¼‰ä¸æ–¹æ³•ï¼ˆå¦‚ï¼šèµ·é£ï¼Œé™è½ï¼‰æ”¾åˆ°ä¸€ä¸ª trait å°±æ˜¯ä¸€ä¸ªåˆç†çš„æ‹†åˆ†ã€‚</p>
<h2 id="trait-æœ‰ä»€ä¹ˆä¼˜åŠ¿">Trait æœ‰ä»€ä¹ˆä¼˜åŠ¿ ?</h2>
<p>trait æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿæ¥çœ‹ä¸€æ®µä»£ç ï¼š</p>
<pre><code class="language-php?start_inline=1">class User extends Model
{
    use Authenticate, SoftDeletes, Arrayable, Cacheable;

    ...
}
</code></pre>
<p>è¿™ä¸ªç”¨æˆ·æ¨¡å‹ç±»ï¼Œæˆ‘ä»¬å¼•å…¥äº†å››ä¸ªç‰¹æ€§ï¼šæ³¨å†Œä¸æˆæƒã€è½¯åˆ é™¤ã€æ•°ç»„å¼æ“ä½œã€å¯ç¼“å­˜ã€‚</p>
<p>æˆ‘ä»¬çœ‹åˆ°ä»£ç çš„æ—¶å€™ä¸€çœ¼ä¾¿çŸ¥é“å½“å‰æ”¯æŒäº†å“ªäº›ä¸ªç‰¹æ€§ã€‚å†çœ‹ä¸‹é¢å¦å¤–ä¸€ç§å†™æ³•ï¼š</p>
<pre><code class="language-php?start_inline=1">abstract AdvansedUser {
  // ... å®ç°äº† Authenticate, SoftDeletes, Arrayable, Cacheable çš„æ‰€æœ‰æ–¹æ³•
}
class User extends AdvansedUser
{
    ...
}
</code></pre>
<p>ä½ ä¸å¾—ä¸å†å»é˜…è¯» <code>AdvansedUser</code> çš„ä»£ç æ‰èƒ½ç†è§£ã€‚ä½ æƒ³è¯´æ²¡æœ‰å¯è¯»æ€§æ˜¯å› ä¸ºæˆ‘åŸºç±»çš„åç§°æ²¡èµ·å¥½ï¼Ÿå¯æ˜¯ï¼Œè¿™ç§å„ç§ç‰¹æ€§ç»„åˆçš„ä¸€ä¸ªåŸºç±»æ˜¯æ ¹æœ¬æ— æ³•èµ·ä¸€ä¸ªè§åçŸ¥ä¹‰çš„åç§°çš„ï¼Œä¸ä¿¡ä½ å¯ä»¥è¯•ä¸€ä¸‹ã€‚</p>
<p>å°±ç®—ä½ çœŸçš„èµ·äº†ä¸€ä¸ªè§åçŸ¥ä¹‰çš„åç§°ï¼š<code>AuthenticateCacheableAndArrayableSoftDeletesUser</code>ï¼Œå¯æ˜¯å½“éœ€æ±‚å˜æ›´ï¼Œè¦æ±‚åœ¨ <code>FooUser</code>ï¼ˆåŒæ ·ç»§æ‰¿äº†è¿™ä¸ªåŸºç±»ï¼‰ ä¸­å»é™¤ç¼“å­˜ç‰¹æ€§ï¼Œè€Œ <code>User</code> ç±»ä¿ç•™è¿™ä¸ªç‰¹æ€§ï¼Œæ€ä¹ˆåŠï¼Ÿå†åˆ›å»ºä¸€ä¸ªåŸºç±»ä¹ˆï¼Ÿ</p>
<p>è¿™å°±æ˜¯æˆ‘ç†è§£çš„ Traitï¼š</p>
<p><strong>å®ƒä¸ä»…ä»…æ˜¯å¯å¤ç”¨ä»£ç æ®µçš„é›†åˆï¼Œå®ƒåº”è¯¥æ˜¯ä¸€ç»„æè¿°äº†æŸä¸ªç‰¹æ€§çš„çš„å±æ€§ä¸æ–¹æ³•çš„é›†åˆã€‚å®ƒçš„ä¼˜ç‚¹åœ¨äºéšæ„ç»„åˆï¼Œè€¦åˆæ€§ä½ï¼Œå¯è¯»æ€§é«˜ã€‚</strong></p>
<p>å¹³å¸¸å†™ä»£ç çš„æ—¶å€™ä¹Ÿè®¸æ€ä¹ˆæ‹†åˆ†æ‰æ˜¯å¤§å®¶çš„ç—›ç‚¹ï¼Œåˆ†äº«ä»¥ä¸‹å‡ ä¸ªæŠ€å·§ï¼š</p>
<ul>
<li>ä»éœ€æ±‚æˆ–åŠŸèƒ½æè¿°æ‹†åˆ†ï¼Œè€Œä¸æ˜¯å†™äº†ä¸¤æ®µä»£ç å‘ç°ä»£ç ä¸€æ ·å°±æåˆ°ä¸€èµ·ï¼›</li>
<li>æ‹†åˆ†æ—¶æŸäº›å±æ€§ä¹Ÿä¸€èµ·å¸¦èµ°ï¼Œæ¯”å¦‚ä¸Šé¢ç¬¬ä¸€ä¸ªä¾‹å­é‡Œçš„ä»·æ ¼ï¼Œå®ƒæ˜¯â€œå¯å–æ€§â€å¿…å¤‡çš„å±æ€§ï¼›</li>
<li>æ‹†åˆ†æ—¶å¦‚æœç»™ Trait èµ·åå›°éš¾æ—¶ï¼Œè¯·è®¤çœŸæ€è€ƒä½ æ˜¯å¦çœŸçš„æ‹†åˆ†å¯¹äº†ï¼Œå› ä¸ºæ­£ç¡®çš„æ‹†åˆ†æ˜¯å¾ˆå®¹æ˜“æè¿° â€œå®ƒæ˜¯ä¸€ä¸ªå…·æœ‰ä»€ä¹ˆåŠŸèƒ½çš„ç‰¹æ€§â€ çš„ï¼›</li>
</ul>
<p>æ€»ä¹‹ä¸€å®šè¦è®°ä½ï¼šä¸è¦ä¸ºäº†è®©ä¸¤æ®µç›¸åŒçš„ä»£ç æåˆ°ä¸€èµ·è¿™æ ·ç®€å•ç²—æš´çš„æ–¹å¼æ¥æ‹†åˆ†ã€‚</p>
<p>ä»¥ä¸Šæ˜¯ä¸ªäººè§è§£ï¼Œæ¬¢è¿å„ä½è®¨è®ºã€‚â€‹ğŸ˜„â€‹</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-trait">ä»€ä¹ˆæ˜¯ Trait ?</a></li>
<li><a href="#trait-%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E5%8A%BF">Trait æœ‰ä»€ä¹ˆä¼˜åŠ¿ ?</a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://overtrue.me/npm-proxy">
              <h3 class="post-title">
                npm ä»£ç†å®‰è£…ä¾èµ–
              </h3>
            </a>
          </div>
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: 'f2027ed0e5be934c16d5',
    clientSecret: '37b4520fa4543c1565ed971e0e50ac215e110c99',
    repo: 'blog',
    owner: 'overtrue',
    admin: ['overtrue'],
    labels: ['gitalk', 'comment'],
    id: location.pathname.slice(1, location.pathname.lastIndexOf('/')).substring(0, 49), 
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

        <div class="site-footer">
  <span>Powered by  <span><a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://overtrue.me/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
